<!--roomcocde.html-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question All</title>
    <link rel="stylesheet" href="style.css">
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏¥‡∏á‡∏Ñ‡πå Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô */
        #top-menu {
            background: linear-gradient(45deg, #ff7e5f, #feb47b);
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: sticky;
            top: 1%;
            z-index: 100;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            animation: gradient-animation 6s ease infinite;
            border-bottom: 5px solid cyan;
            box-shadow: 0 0 20px cyan;
        }

        #top-menu a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            margin: 0 15px;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        #top-menu a:hover {
            background-color: #ff6f61;
            transform: scale(1.1);
            box-shadow: 0 0 15px cyan;
        }

        @keyframes gradient-animation {
    0%, 100% {
        background: linear-gradient(45deg, #0f2027, #203a43, #2c5364); /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏°‡πÑ‡∏õ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
    }
    50% {
        background: linear-gradient(45deg, #232526, #414345, #485563); /* ‡∏î‡∏≥‡πÄ‡∏Ç‡πâ‡∏°‡πÑ‡∏õ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
    }
}

/* ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
h1 {
    font-size: 40px;
    font-family: 'Roboto', sans-serif;
    color: #4CAF50;
    text-shadow: 2px 2px 5px rgba(0, 204, 255, 0.7);
}


#question-list {
    font-size: 18px;
    padding: 100px 40px;
    text-align: center;
}

#quiz-table {
    margin: 20px auto;
    width: 100%;
    border-collapse: collapse;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

#quiz-table th, #quiz-table td {
    font-size: 18px;
    border: 1px solid white;
    padding: 10px;
    text-align: center;
}

#quiz-table th {
    background: rgba(0, 0, 0, 0.7);
    color: white;
    font-weight: bold;
}

#quiz-table td {
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

button.select-btn {
    background-color: #4caf50;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}

button.select-btn:hover {
    background-color: #ff6347;
}

/*‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÇ‡∏î‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å*/
button.selected {
    background-color: red;  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á */
    color: white;
}

#level-filter {
    font-size: 18px;
}

#type-filter {
    font-size: 18px;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏≠‡∏ß‡∏Å‡∏≤‡∏® */
#menu2 {
    position: fixed;
    top: 20%;
    right: 0;
    background-color: rgba(0, 0, 0, 0.8);
    padding: 20px;
    box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
    width: 250px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    border-radius: 10px;
    animation: slide-in 0.5s ease-in-out forwards;
}

/* ‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏¥‡∏á‡∏Å‡πå */
#menu2 a {
    color: #ffffff;
    text-decoration: none;
    font-size: 18px;
    padding: 15px;
    background-color: rgba(0, 204, 255, 0.2);
    text-align: center;
    border-radius: 5px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* ‡πÄ‡∏°‡∏∑‡πà‡∏≠ hover ‡πÄ‡∏°‡∏ô‡∏π */
#menu2 a:hover {
    background-color: #ff7f50;
    transform: scale(1.1);
    box-shadow: 0 0 15px cyan;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° reset ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
.reset-btn {
    background-color: red;
    color: white;
    font-size: 18px;
    padding: 8px 18px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

.reset-btn:hover {
    background-color: darkred;
    box-shadow: 0 0 15px rgb(234, 87, 8);
}
    </style>
</head>
<body>
        <!-- ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô -->
        <div id="top-menu">
            <a href="start.html"><i class="fa-solid fas fa-play fa-bounce" style="--fa-bounce-start-scale-x: 1; --fa-bounce-start-scale-y: 1; --fa-bounce-jump-scale-x: 1; --fa-bounce-jump-scale-y: 1; --fa-bounce-land-scale-x: 1; --fa-bounce-land-scale-y: 1; color: cyan;"></i> Start</a>
            <a href="addquestion.html">ü§îAdd Questionsüí≠</a>
            <a href="roomcode.html"><i class="fas fa-key fa-solid fa-flip"  style="--fa-animation-duration: 3s; color: cyan;"></i> Set Room Code</a>  
            <a href="seeroom.html">üö©View Room CodesüëÄ</a> 
            <a href="scores.html"><i class="fas fa-trophy fa-beat" style="color: cyan;"></i> View Scores</a>
            <a href="historyroomcode.html">üëëHistory RoomCodeüè∞</a>
            <a href="setting.html"><i class="fas fa-cog fa-pulse" style="color: cyan;"></i> Setting</a>
            <a href="index.html"><i class="fa-solid fas fa-sign-out-alt fa-shake" style="color: cyan;"></i> Log Out</a>
        </div>
    
    <div id="menu2">
        <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î Room Code</h3>
        <ul>
            <li>‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: <span id="selected-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏• 1: <span id="level-1-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏• 2: <span id="level-2-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏• 3: <span id="level-3-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° Multiple-choice: <span id="total-multiple-choice">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° Essay: <span id="total-essay">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total-questions">0</span></li>
            <li>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: <span id="total-score">0</span></li>
            <li>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: <span id="total-time">0</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</li>
                        <!-- ‡∏õ‡∏∏‡πà‡∏° Reset ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á -->
<button id="reset-btn" class="reset-btn">‚ùï‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‚ùï</button>
        
            <li>‡∏Å‡∏£‡∏≠‡∏Å Room Code (4 ‡∏ï‡∏±‡∏ß): <input type="text" id="roomcode-input" maxlength="4" pattern="\d{4}" required>
                <button id="save-roomcode-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </li>
        </ul>
    </div>

    <div id="question-list">
        <h1>üõ∞Ô∏è Question All üõ∏</h1>
        <div id="filter">
            <label for="level-filter">‚û°Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏•: </label>
            <select id="level-filter">
                <option value="all">All Levels</option>
                <option value="1">Level 1</option>
                <option value="2">Level 2</option>
                <option value="3">Level 3</option>
            </select>
        </div>
        <div id="filter2">
            <label for="type-filter">‚û°Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: </label>
            <select id="type-filter">
                <option value="all">All Types</option>
                <option value="multiple-choice">Multiple Choice</option>
                <option value="essay">Essay</option>
            </select>
        </div>
        <table id="quiz-table">
            <thead>
                <tr>
                    <th>Level</th>
                    <th>Type</th>
                    <th>Question</th>
                    <th>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</th>
                </tr>
            </thead>
            <tbody>
                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </tbody>
        </table>
                
    </div>
    <div id="meteor-background"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <script>
        const socket = io();
        let selectedQuestions = [];
        let totalScore = 0;
        let levelCount = { 1: 0, 2: 0, 3: 0 };
        let totalTime = 0;  // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°
        let totalmultipleChoice = 0;
        let totalEssay = 0;
        let totalQuestions = 0;

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        async function fetchQuestions() {
    try {
        const response = await fetch('/quiz');
        const questions = await response.json();
        const tableBody = document.querySelector("#quiz-table tbody");
        
        // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏´‡∏°‡πà
        tableBody.innerHTML = '';

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡πÅ‡∏•‡∏∞Type‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
        const selectedLevel = document.getElementById('level-filter').value;
        const selectedType = document.getElementById('type-filter').value;
        
        // ‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÇ‡∏î‡∏¢‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
        const filteredQuestions = questions.filter(quiz => {
            const levelMatch = selectedLevel === 'all' || quiz.level.toString() === selectedLevel;
            const typeMatch = selectedType === 'all' || quiz.type === selectedType;  // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó

            return levelMatch && typeMatch;
        });
        
        filteredQuestions.forEach((quiz) => {
            const row = document.createElement("tr");
            row.dataset.quizId = quiz._id;  // ‡πÄ‡∏û‡∏¥‡πà‡∏° ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ñ‡∏ß

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡∏á‡πÉ‡∏ô data-score ‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
            row.innerHTML = `
    <td>${quiz.level}</td>
    <td>${quiz.type}</td>
    <td>${quiz.question}</td>
    <td><button class="select-btn" data-score="${quiz.score || getScoreByLevel(quiz.level)}" data-timer="${quiz.timer || 0}">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</button></td>
`;
            tableBody.appendChild(row);
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        document.querySelectorAll(".select-btn").forEach(button => {
            button.addEventListener("click", (e) => {
                const row = e.target.closest("tr");
                const quizId = row.dataset.quizId;
                const level = row.cells[0].textContent;
                const score = parseInt(row.querySelector("button").dataset.score, 10) || getScoreByLevel(level); // ‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                const timer = parseInt(row.querySelector("button").dataset.timer, 10) || 0;  // ‡∏î‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å data-timer
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                if (isNaN(score)) {
                    console.error("Invalid score:", score, timer);
                    return;
                }

                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
                if (!selectedQuestions.some(q => q._id === quizId)) {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    const selectedQuiz = questions.find(q => q._id === quizId);

                 // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                    selectedQuestions.push(selectedQuiz);
                    totalScore += score;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    totalTime += timer;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°
                    levelCount[level] += 1;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•

                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó multiple-choice ‡πÅ‡∏•‡∏∞ essay
                    if (selectedQuiz.type === 'multiple-choice') {
                        totalmultipleChoice++;
                    } else if (selectedQuiz.type === 'essay') {
                        totalEssay++;
                    }

                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏ô‡∏π
                    document.getElementById("selected-count").textContent = selectedQuestions.length;
                    document.getElementById("level-1-count").textContent = levelCount[1];
                    document.getElementById("level-2-count").textContent = levelCount[2];
                    document.getElementById("level-3-count").textContent = levelCount[3];
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡πà‡∏≤‡∏á ‡πÜ
                    document.getElementById("total-multiple-choice").textContent = totalmultipleChoice;
                    document.getElementById("total-essay").textContent = totalEssay;
                    document.getElementById("total-questions").textContent = selectedQuestions.length;
                    document.getElementById("total-score").textContent = totalScore;
                    document.getElementById("total-time").textContent = totalTime;  // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°

                    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                    e.target.classList.add('selected');
                }
            });
        });
    } catch (err) {
        console.error("Error fetching questions:", err);
    }
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° reset
document.getElementById("reset-btn").addEventListener("click", () => {
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ó‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
    selectedQuestions = [];
    totalScore = 0;
    levelCount = { 1: 0, 2: 0, 3: 0 };
    totalTime = 0;  // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°
    totalmultipleChoice = 0;
    totalEssay = 0;
    totalQuestions = 0;
    
        document.getElementById("selected-count").textContent = selectedQuestions.length;
        document.getElementById("level-1-count").textContent = levelCount[1];
        document.getElementById("level-2-count").textContent = levelCount[2];
        document.getElementById("level-3-count").textContent = levelCount[3];
        document.getElementById("total-multiple-choice").textContent = totalmultipleChoice;
        document.getElementById("total-essay").textContent = totalEssay;
        document.getElementById("total-questions").textContent = selectedQuestions.length;
        document.getElementById("total-score").textContent = totalScore;
        document.getElementById("total-time").textContent = totalTime;  

    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ó‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏Ñ‡∏•‡∏≤‡∏™ selected ‡∏≠‡∏≠‡∏Å)
    document.querySelectorAll(".select-btn").forEach(button => {
        button.classList.remove("selected");
    });
});

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        function getScoreByLevel(level) {
            if (level === '1') return 1;  // ‡πÄ‡∏•‡πÄ‡∏ß‡∏• 1 ‡∏°‡∏µ 1 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            if (level === '2') return 3;  // ‡πÄ‡∏•‡πÄ‡∏ß‡∏• 2 ‡∏°‡∏µ 3 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            if (level === '3') return 5;  // ‡πÄ‡∏•‡πÄ‡∏ß‡∏• 3 ‡∏°‡∏µ 5 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
            return 0;  // ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏•‡πÄ‡∏ß‡∏•
        }

        fetchQuestions();
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏•
document.getElementById('level-filter').addEventListener('change', fetchQuestions);

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏•
document.getElementById('type-filter').addEventListener('change', fetchQuestions);

function createMeteor() {
    const meteor = document.createElement('div');
    meteor.classList.add('meteor');
    document.body.appendChild(meteor);

    meteor.style.left = `${Math.random() * 100}vw`;
    meteor.style.animationDuration = `${Math.random() * 3 + 3}s`;
    meteor.style.width = `${Math.random() * 5 + 2}px`;
    meteor.style.height = meteor.style.width;

    setTimeout(() => meteor.remove(), 5000);
}

setInterval(createMeteor, 500);

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å RoomCode ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
document.getElementById('save-roomcode-btn').addEventListener('click', async function () {
    const roomCode = document.getElementById('roomcode-input').value.trim();
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ RoomCode ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß 4 ‡∏ï‡∏±‡∏ß
    if (roomCode.length !== 4) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Room Code ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 4 ‡∏ï‡∏±‡∏ß.");
        return;
    }

    // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
    const data = {
        roomCode: roomCode,
        selectedQuestions: selectedQuestions,
        totalScore: totalScore,
        totalTime: totalTime,
        totalmultipleChoice: totalmultipleChoice,
        totalEssay: totalEssay,
        totalQuestions: totalQuestions,
    };

    try {
        const response = await fetch('https://sarisa-28pcpp-github-io.onrender.com/save-roomcode', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });

        if (response.ok) {
            alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Room Code ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
        } else {
            alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Room Code.");
        }
    } catch (error) {
        console.error('Error:', error);
        alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ.");
    }
});

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡πÉ‡∏´‡∏°‡πà
function createMeteor() {
    const meteor = document.createElement('div');
    meteor.classList.add('meteor');
    document.body.appendChild(meteor);
    
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏ß
    meteor.style.left = `${Math.random() * 100}vw`;
    meteor.style.animationDuration = `${Math.random() * 5 + 5}s`;  // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏ä‡πâ‡∏≤‡πÜ

    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
    meteor.style.width = `${Math.random() * 3 + 4}px`;
    meteor.style.height = `${Math.random() * 3 + 4}px`;
    meteor.style.opacity = Math.random() * 0.5 + 0.5;

    // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à
    setTimeout(() => {
        meteor.remove();
    }, (Math.random() * 5 + 5) * 1000);  // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á animation
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡∏ó‡∏∏‡∏Å‡πÜ 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
setInterval(createMeteor, 500);
    </script>
</body>
</html>