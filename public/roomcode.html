<!--public/roomcocde.html--> 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question All</title>
    <link rel="stylesheet" href="style.css">
    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏¥‡∏á‡∏Ñ‡πå Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô */
        #top-menu {
            background: linear-gradient(45deg, #ff7e5f, #feb47b);
            color: white;
            padding: 10px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: sticky;
            top: 1%;
            z-index: 100;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            animation: gradient-animation 6s ease infinite;
            border-bottom: 5px solid cyan;
            box-shadow: 0 0 20px cyan;
        }

        #top-menu a {
            color: white;
            text-decoration: none;
            font-size: 18px;
            margin: 0 15px;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        #top-menu a:hover {
            background-color: #ff6f61;
            transform: scale(1.1);
            box-shadow: 0 0 15px cyan;
        }

        @keyframes gradient-animation {
    0%, 100% {
        background: linear-gradient(45deg, #0f2027, #203a43, #2c5364); /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏°‡πÑ‡∏õ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
    }
    50% {
        background: linear-gradient(45deg, #232526, #414345, #485563); /* ‡∏î‡∏≥‡πÄ‡∏Ç‡πâ‡∏°‡πÑ‡∏õ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô */
    }
}

/* ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
h1 {
    font-size: 40px;
    font-family: 'Roboto', sans-serif;
    color: #4CAF50;
    text-shadow: 2px 2px 5px rgba(0, 204, 255, 0.7);
}


#question-list {
    font-size: 18px;
    padding: 100px 40px;
    text-align: center;
}

#quiz-table {
    margin: 20px auto;
    width: 100%;
    border-collapse: collapse;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

#quiz-table th, #quiz-table td {
    font-size: 18px;
    border: 1px solid white;
    padding: 10px;
    text-align: center;
}

#quiz-table th {
    background: rgba(0, 0, 0, 0.7);
    color: white;
    font-weight: bold;
}

#quiz-table td {
    background: rgba(255, 255, 255, 0.1);
    color: white;
}

button.select-btn {
    background-color: #4caf50;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}

button.select-btn:hover {
    background-color: #ff6347;
}

/*‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÇ‡∏î‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å*/
button.selected {
    background-color: red;  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á */
    color: white;
}

#level-filter {
    font-size: 18px;
}

#type-filter {
    font-size: 18px;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏≠‡∏ß‡∏Å‡∏≤‡∏® */
#menu2 {
    position: fixed;
    top: 20%;
    right: 0;
    background-color: rgba(0, 0, 0, 0.8);
    padding: 20px;
    box-shadow: -2px 0 15px rgba(0, 0, 0, 0.1);
    width: 250px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    border-radius: 10px;
    animation: slide-in 0.5s ease-in-out forwards;
}

/* ‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏¥‡∏á‡∏Å‡πå */
#menu2 a {
    color: #ffffff;
    text-decoration: none;
    font-size: 18px;
    padding: 15px;
    background-color: rgba(0, 204, 255, 0.2);
    text-align: center;
    border-radius: 5px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* ‡πÄ‡∏°‡∏∑‡πà‡∏≠ hover ‡πÄ‡∏°‡∏ô‡∏π */
#menu2 a:hover {
    background-color: #ff7f50;
    transform: scale(1.1);
    box-shadow: 0 0 15px cyan;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° reset ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
.reset-btn {
    background-color: red;
    color: white;
    font-size: 18px;
    padding: 8px 18px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

.reset-btn:hover {
    background-color: darkred;
    box-shadow: 0 0 15px rgb(234, 87, 8);
}

/* ‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° (menu3) ‡πÅ‡∏ö‡∏ö‡∏ò‡∏µ‡∏°‡∏≠‡∏ß‡∏Å‡∏≤‡∏® */
#menu3 {
    background: linear-gradient(135deg, rgba(10,10,30,0.8), rgba(0,0,50,0.9));
    border: 2px solid cyan;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
    padding: 20px;
    color: white;
    font-family: 'Orbitron', sans-serif; /* ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏ó‡πà */
    margin: 20px;
}

#menu3 h3 {
    text-align: center;
    font-size: 24px;
    margin-bottom: 15px;
    color: burlywood;
    text-shadow: 1px 1px 5px rgba(0, 255, 255, 0.8);
}

#menu3 ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

#menu3 li {
    margin-bottom: 10px;
    font-size: 18px;
}

#menu3 input[type="number"] {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid cyan;
    border-radius: 5px;
    padding: 5px;
    color: white;
    width: 60px;
    text-align: center;
}

#menu3 button {
    background: cyan;
    border: none;
    border-radius: 5px;
    color: black;
    padding: 10px 20px;
    cursor: pointer;
    transition: transform 0.3s, background 0.3s;
    margin: 5px 0;
    font-weight: bold;
}

#menu3 button:hover {
    transform: scale(1.1);
    background: #00ffff;
}
#total-questions-info {
    background: rgba(0, 0, 50, 0.9);
    border: 1px solid cyan;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
    margin-bottom: 15px;
    text-align: center;
}

#total-questions-info p {
    font-size: 18px;
    font-weight: bold;
    color: cyan;
    margin: 5px 0;
}
/* ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á popup-editquestion ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏µ‡∏°‡∏≠‡∏ß‡∏Å‡∏≤‡∏® */
#popup-editquestion {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 50, 0.95); /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏ß‡∏Å‡∏≤‡∏® */
    color: cyan;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.7);
    z-index: 1000;
    width: 50%;
    max-width: 600px;
    animation: fadeIn 0.5s ease-in-out;
    border: 2px solid cyan;
}

/* ‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translate(-50%, -55%);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

/* ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Popup */
.popup-content {
    text-align: center;
    font-family: 'Orbitron', sans-serif;
}

/* ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î Popup */
.close {
    float: right;
    font-size: 28px;
    cursor: pointer;
    color: white;
    transition: 0.3s;
}

.close:hover {
    color: red;
    transform: scale(1.2);
}

/* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á Input ‡πÅ‡∏•‡∏∞ Select */
#popup-editquestion input, 
#popup-editquestion select, 
#popup-editquestion textarea {
    width: 90%;
    padding: 10px;
    margin: 5px 0;
    background: rgba(0, 255, 255, 0.2);
    border: 1px solid cyan;
    color: rgb(0, 0, 0);
    font-size: 16px;
    font-family: 'Orbitron', sans-serif;
    border-radius: 5px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
}

/* ‡∏õ‡∏∏‡πà‡∏° Save Changes */
#save-edit-btn {
    background: linear-gradient(45deg, cyan, #00ffff);
    color: black;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
    margin-top: 10px;
    border-radius: 5px;
    transition: transform 0.3s, box-shadow 0.3s;
}

#save-edit-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 0 15px cyan;
}
/* ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏ö‡∏•‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
#blur-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5); /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏∑‡∏î‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
    backdrop-filter: blur(10px); /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏ö‡∏•‡∏≠ */
    z-index: 999; /* ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ popup */
    display: none;
    transition: opacity 0.3s ease-in-out;
}

    </style>
</head>
<body>
        <!-- ‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô -->
        <div id="top-menu">
            <a href="start.html"><i class="fa-solid fas fa-play fa-bounce" style="--fa-bounce-start-scale-x: 1; --fa-bounce-start-scale-y: 1; --fa-bounce-jump-scale-x: 1; --fa-bounce-jump-scale-y: 1; --fa-bounce-land-scale-x: 1; --fa-bounce-land-scale-y: 1; color: cyan;"></i> Start</a>
            <a href="addquestion.html">ü§îAdd Questionsüí≠</a>
            <a href="roomcode.html"><i class="fas fa-key fa-solid fa-flip"  style="--fa-animation-duration: 3s; color: cyan;"></i> Set Room Code</a>  
            <a href="seeroom.html">üö©View Room CodesüëÄ</a> 
            <a href="scores.html"><i class="fas fa-trophy fa-beat" style="color: cyan;"></i> View Scores</a>
            <a href="historyroomcode.html">üëëHistory RoomCodeüè∞</a>
            <a href="setting.html"><i class="fas fa-cog fa-pulse" style="color: cyan;"></i> Setting</a>
            <a href="evaluation.html">üôáüèª Evaluation üôáüèª‚Äç‚ôÄÔ∏è</a>
            <a href="onoff.html">ü´ÄStatusüí´</a>
            <a href="new/newstart.html"><i class="fa-solid fa-globe fa-spin" style="color: cyan;"></i> ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà 2</a>
            <a href="index.html"><i class="fa-solid fas fa-sign-out-alt fa-shake" style="color: cyan;"></i> Log Out</a>
        </div>
    
    <div id="menu2">
        <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≥‡∏´‡∏ô‡∏î Room Code</h3>
        <ul>
            <li>‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß: <span id="selected-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏• 1: <span id="level-1-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏• 2: <span id="level-2-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡πÄ‡∏•‡πÄ‡∏ß‡∏• 3: <span id="level-3-count">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° Multiple-choice: <span id="total-multiple-choice">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏° Essay: <span id="total-essay">0</span></li>
            <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total-questions">0</span></li>
            <li>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: <span id="total-score">0</span></li>
            <li>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: <span id="total-time">0</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</li>
                        <!-- ‡∏õ‡∏∏‡πà‡∏° Reset ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á -->
<button id="reset-btn" class="reset-btn">‚ùï‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‚ùï</button>
              
            <li>‡∏Å‡∏£‡∏≠‡∏Å Room Code (4 ‡∏ï‡∏±‡∏ß): <input type="text" id="roomcode-input" maxlength="4" pattern="\d{4}" required>
                <button id="save-roomcode-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
            </li>
        </ul>
    </div>

    <div id="question-list">
        <h1>üõ∞Ô∏è Question All üõ∏</h1>
        <div id="filter">
            <label for="level-filter">‚û°Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏•: </label>
            <select id="level-filter">
                <option value="all">All Levels</option>
                <option value="1">Level 1</option>
                <option value="2">Level 2</option>
                <option value="3">Level 3</option>
            </select>
        </div>
        <div id="filter2">
            <label for="type-filter">‚û°Ô∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: </label>
            <select id="type-filter">
                <option value="all">All Types</option>
                <option value="multiple-choice">Multiple Choice</option>
                <option value="essay">Essay</option>
            </select>
        </div>

        <div id="menu3">
            <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°</h3>
            <div id="total-questions-info">
                <p>üìä ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö: <span id="total-questions-all">0</span> ‡∏Ç‡πâ‡∏≠</p>
                <p>‚úÖ Multiple-Choice: <span id="total-multiple-all">0</span></p>
                <p>üìù Essay: <span id="total-essay-all">0</span></p>
            </div>
            <ul>
                <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö 1: <input type="number" id="level1-count" min="0" value="0"></li>
                <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö 2: <input type="number" id="level2-count" min="0" value="0"></li>
                <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö 3: <input type="number" id="level3-count" min="0" value="0"></li>
                <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Multiple Choice: <input type="number" id="mc-count" min="0" value="0"></li>
                <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Essay: <input type="number" id="essay-count" min="0" value="0"></li>
                <button id="random-select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°</button>          
                </li>
            </ul>
        </div>
        
        <table id="quiz-table">
            <thead>
                <tr>
                    <th>Level</th>
                    <th>Type</th>
                    <th>Question</th>
                    <th>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö/‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</th>
                    <th>Edit</th>
                    <th>‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</th>
                    <th>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</th>
                </tr>
            </thead>
            <tbody>
                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
            </tbody>
            <button id="delete-selected-btn">‡∏•‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        </table>
        <div id="blur-background"></div> <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ö‡∏•‡∏≠ -->
        <div id="popup-editquestion" class="popup">
            <div class="popup-content">
                <span class="close" id="close-edit-popup">&times;</span>
                <h2>Edit Question</h2>
                <label>Type:</label>
                <select id="edit-type">
                    <option value="multiple-choice">Multiple Choice</option>
                    <option value="essay">Essay</option>
                </select>
                <label>Question:</label>
                <textarea id="edit-question"></textarea>
                <label>Options (comma-separated):</label>
                <input type="text" id="edit-options">
                <label>Correct Answer:</label>
                <input type="text" id="edit-correct">
                <label>Timer (seconds):</label>
                <input type="number" id="edit-timer">
                <label>Level:</label>
                <input type="number" id="edit-level">
                <button id="save-edit-btn">Save Changes</button>
            </div>
        </div>
        
    </div>
    <div id="meteor-background"></div>
    <audio id="o-sound" src="sounds/o.mp3" preload="auto"></audio>
    <audio id="h-sound" src="sounds/h.mp3" preload="auto"></audio>
    <audio id="hoverSound" src="sounds/h.mp3" preload="auto"></audio>
    <iframe src="music.html" style="display: none;"></iframe>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <script>
        const socket = io();
        let selectedQuestions = [];
        let totalScore = 0;
        let levelCount = { 1: 0, 2: 0, 3: 0 };
        let totalTime = 0;  // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°
        let totalmultipleChoice = 0;
        let totalEssay = 0;
        let totalQuestions = 0;

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        async function fetchQuestions() {
    try {
        const adminUsername = sessionStorage.getItem('username'); // ‡∏î‡∏∂‡∏á username ‡∏Ç‡∏≠‡∏á admin
        const response = await fetch(`/quiz?adminUsername=${adminUsername}`);
        const questions = await response.json();

        const selectedLevel = document.getElementById("level-filter").value;
        const selectedType = document.getElementById("type-filter").value;

        console.log("üîé ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°..."); 
        console.log("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏•:", selectedLevel);
        console.log("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:", selectedType);
        
        // ‚úÖ ‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
        const filteredQuestions = questions.filter(q => 
            (selectedLevel === "all" || q.level.toString() === selectedLevel) &&
            (selectedType === "all" || q.type === selectedType)
        );

        console.log("üìã ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏≠‡∏á:", filteredQuestions.length);

        const tableBody = document.querySelector("#quiz-table tbody");
        tableBody.innerHTML = '';

        filteredQuestions.forEach((quiz) => {
            const row = document.createElement("tr");
            row.dataset.quizId = quiz._id;

            row.innerHTML = `
                <td>${quiz.level}</td>
                <td>${quiz.type}</td>
                <td>${quiz.question}</td>
                <td>${quiz.correct}</td>
                <td><button class="edit-btn" data-id="${quiz._id}">Edit</button></td>
                <td><button class="delete-btn" data-id="${quiz._id}">‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ</button></td>
                <td><button class="select-btn" data-score="${quiz.score || getScoreByLevel(quiz.level)}" data-timer="${quiz.timer}">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</button></td>
            `;
            tableBody.appendChild(row);
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        document.querySelectorAll(".select-btn").forEach(button => {
            button.addEventListener("click", (e) => {
                const row = e.target.closest("tr");
                const quizId = row.dataset.quizId;
                const level = row.cells[0].textContent;
                const score = parseInt(row.querySelector("button").dataset.score, 10) || getScoreByLevel(level); // ‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                let timer = parseInt(e.target.dataset.timer, 10);
                
                if (isNaN(timer)) {
                    console.warn("Timer is NaN, setting to quiz.timer:", quiz.timer);
                    timer = quiz.timer || 0;
                }
                console.log("Selected Quiz Timer:", timer); // ‡πÄ‡∏ä‡πá‡∏Å‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
                if (isNaN(score)) {
                    console.error("Invalid score:", score, timer);
                    return;
                }

                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
                if (!selectedQuestions.some(q => q._id === quizId)) {
                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                    const selectedQuiz = questions.find(q => q._id === quizId);

                 // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                    selectedQuestions.push(selectedQuiz);
                    totalScore += score;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    totalTime += timer;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°
                    levelCount[level] += 1;  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•

                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó multiple-choice ‡πÅ‡∏•‡∏∞ essay
                    if (selectedQuiz.type === 'multiple-choice') {
                        totalmultipleChoice++;
                    } else if (selectedQuiz.type === 'essay') {
                        totalEssay++;
                    }

                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏ô‡∏π
                    document.getElementById("selected-count").textContent = selectedQuestions.length;
                    document.getElementById("level-1-count").textContent = levelCount[1];
                    document.getElementById("level-2-count").textContent = levelCount[2];
                    document.getElementById("level-3-count").textContent = levelCount[3];
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡πà‡∏≤‡∏á ‡πÜ
                    document.getElementById("total-multiple-choice").textContent = totalmultipleChoice;
                    document.getElementById("total-essay").textContent = totalEssay;
                    document.getElementById("total-questions").textContent = selectedQuestions.length;
                    document.getElementById("total-score").textContent = totalScore;
                    document.getElementById("total-time").textContent = `${Math.floor(totalTime / 60)} ‡∏ô‡∏≤‡∏ó‡∏µ ${totalTime % 60} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
                    console.log("Updated Total Time:", totalTime); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤ totalTime

                    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                    e.target.classList.add('selected');
                }
        
            });
        });
    } catch (err) {
        console.error("Error fetching questions:", err);
    }
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° reset
document.getElementById("reset-btn").addEventListener("click", () => {
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ó‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
    selectedQuestions = [];
    totalScore = 0;
    levelCount = { 1: 0, 2: 0, 3: 0 };
    totalTime = 0;  // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°
    totalmultipleChoice = 0;
    totalEssay = 0;
    totalQuestions = 0;

    
        document.getElementById("selected-count").textContent = selectedQuestions.length;
        document.getElementById("level-1-count").textContent = levelCount[1];
        document.getElementById("level-2-count").textContent = levelCount[2];
        document.getElementById("level-3-count").textContent = levelCount[3];
        document.getElementById("total-multiple-choice").textContent = totalmultipleChoice;
        document.getElementById("total-essay").textContent = totalEssay;
        document.getElementById("total-questions").textContent = selectedQuestions.length;
        document.getElementById("total-score").textContent = totalScore;
        document.getElementById("total-time").textContent = `${Math.floor(totalTime / 60)} ‡∏ô‡∏≤‡∏ó‡∏µ ${totalTime % 60} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;

    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ó‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏Ñ‡∏•‡∏≤‡∏™ selected ‡∏≠‡∏≠‡∏Å)
    document.querySelectorAll(".select-btn").forEach(button => {
        button.classList.remove("selected");
    });
});

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡πÄ‡∏ß‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        function getScoreByLevel(level) {
    if (level.toString() === '1') return 1;
    if (level.toString() === '2') return 3;
    if (level.toString() === '3') return 5;
    return 0;
}

        fetchQuestions();
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏•
document.getElementById('level-filter').addEventListener('change', fetchQuestions);

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡πÄ‡∏ß‡∏•
document.getElementById('type-filter').addEventListener('change', fetchQuestions);

        //‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
document.addEventListener('click', async (event) => {
    if (event.target.classList.contains('delete-btn')) {
        const quizId = event.target.dataset.id;

        if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ô‡∏µ‡πâ?")) {
            try {
                const response = await fetch(`/delete-quiz/${quizId}`, { method: 'DELETE' });

                if (response.ok) {
                    alert('‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
                    fetchQuestions();  // ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á‡∏•‡∏ö
                } else {
                    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°');
                }
            } catch (error) {
                console.error("Error deleting question:", error);
            }
        }
    }
});

function createMeteor() {
    const meteor = document.createElement('div');
    meteor.classList.add('meteor');
    document.body.appendChild(meteor);

    meteor.style.left = `${Math.random() * 100}vw`;
    meteor.style.animationDuration = `${Math.random() * 3 + 3}s`;
    meteor.style.width = `${Math.random() * 5 + 2}px`;
    meteor.style.height = meteor.style.width;

    setTimeout(() => meteor.remove(), 5000);
}

setInterval(createMeteor, 500);

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å RoomCode ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
document.getElementById('save-roomcode-btn').addEventListener('click', async function () {
    const roomCode = document.getElementById('roomcode-input').value.trim();
    const adminUsername = sessionStorage.getItem('username'); // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å sessionStorage
    if (!adminUsername) {
        console.error("adminUsername is not defined");
    }

    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ RoomCode ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß 4 ‡∏ï‡∏±‡∏ß
    if (roomCode.length !== 4) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Room Code ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 4 ‡∏ï‡∏±‡∏ß.");
        return;
    }

    // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå
    const data = {
        roomCode: roomCode,
        selectedQuestions: selectedQuestions,
        totalScore: totalScore,
        totalTime: totalTime,
        totalmultipleChoice: totalmultipleChoice,
        totalEssay: totalEssay,
        totalQuestions: totalQuestions,
        adminUsername: adminUsername  // ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° adminUsername
    };

    try {
        const response = await fetch('https://projectcs30-github-io.onrender.com/save-roomcode', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });

        if (response.ok) {
            alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Room Code ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
        } else {
            alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Room Code.");
        }
    } catch (error) {
        console.error('Error:', error);
        alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ.");
    }
});
//‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡πÅ‡∏£‡∏ô‡∏î‡πâ‡∏≠‡∏°
document.getElementById("random-select-btn").addEventListener("click", async () => {
    const level1 = parseInt(document.getElementById("level1-count").value, 10);
    const level2 = parseInt(document.getElementById("level2-count").value, 10);
    const level3 = parseInt(document.getElementById("level3-count").value, 10);
    const multipleChoice = parseInt(document.getElementById("mc-count").value, 10);
    const essay = parseInt(document.getElementById("essay-count").value, 10);

    try {
        const response = await fetch('/random-questions', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ level1, level2, level3, multipleChoice, essay })
        });

        if (response.ok) {
            const data = await response.json();
            selectedQuestions = data.questions;  // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡∏°‡∏≤‡πÑ‡∏î‡πâ
            updateMenu2();  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô menu2 ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏∏‡πà‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

            // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á
            document.querySelectorAll(".select-btn").forEach(button => {
                const quizId = button.closest("tr").dataset.quizId;
                if (selectedQuestions.some(q => q._id === quizId)) {
                    button.classList.add("selected");
                }
            });

            alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
        } else {
            alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°");
        }
    } catch (error) {
        console.error("Error fetching random questions:", error);
        alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ");
    }
});

function updateMenu2() {
    totalScore = 0;
    levelCount = { 1: 0, 2: 0, 3: 0 };
    totalTime = 0;
    totalmultipleChoice = 0;
    totalEssay = 0;
    totalQuestions = selectedQuestions.length;

    selectedQuestions.forEach(quiz => {
        levelCount[quiz.level]++;
        totalScore += quiz.score || getScoreByLevel(quiz.level);
        totalTime += quiz.timer || 0;

        if (quiz.type === "multiple-choice") {
            totalmultipleChoice++;
        } else if (quiz.type === "essay") {
            totalEssay++;
        }
    });

    document.getElementById("selected-count").textContent = totalQuestions;
    document.getElementById("level-1-count").textContent = levelCount[1];
    document.getElementById("level-2-count").textContent = levelCount[2];
    document.getElementById("level-3-count").textContent = levelCount[3];
    document.getElementById("total-multiple-choice").textContent = totalmultipleChoice;
    document.getElementById("total-essay").textContent = totalEssay;
    document.getElementById("total-questions").textContent = totalQuestions;
    document.getElementById("total-score").textContent = totalScore;
    document.getElementById("total-time").textContent = `${Math.floor(totalTime / 60)} ‡∏ô‡∏≤‡∏ó‡∏µ ${totalTime % 60} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
}

//‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
async function updateTotalQuestionsInfo() {
    try {
        const adminUsername = sessionStorage.getItem('username'); 
        const response = await fetch(`/quiz?adminUsername=${adminUsername}`);
        const questions = await response.json();

        let totalQuestions = questions.length;

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö multiple-choice
        const multipleChoiceQuestions = questions.filter(q => q.type === "multiple-choice");
        let multipleChoiceCount = multipleChoiceQuestions.length;
        let multipleLevel1 = multipleChoiceQuestions.filter(q => q.level == 1).length;
        let multipleLevel2 = multipleChoiceQuestions.filter(q => q.level == 2).length;
        let multipleLevel3 = multipleChoiceQuestions.filter(q => q.level == 3).length;

        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÅ‡∏ö‡∏ö essay
        const essayQuestions = questions.filter(q => q.type === "essay");
        let essayCount = essayQuestions.length;
        let essayLevel1 = essayQuestions.filter(q => q.level == 1).length;
        let essayLevel2 = essayQuestions.filter(q => q.level == 2).length;
        let essayLevel3 = essayQuestions.filter(q => q.level == 3).length;

        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
        document.getElementById("total-questions-all").textContent = questions.length;
        document.getElementById("total-multiple-all").textContent = `${multipleChoiceCount} ‡∏Ç‡πâ‡∏≠ (‡πÄ‡∏•‡πÄ‡∏ß‡∏•1: ${multipleLevel1} ‡∏Ç‡πâ‡∏≠, ‡πÄ‡∏•‡πÄ‡∏ß‡∏•2: ${multipleLevel2} ‡∏Ç‡πâ‡∏≠, ‡πÄ‡∏•‡πÄ‡∏ß‡∏•3: ${multipleLevel3} ‡∏Ç‡πâ‡∏≠ )`;
        document.getElementById("total-essay-all").textContent = `${essayCount} ‡∏Ç‡πâ‡∏≠ (‡πÄ‡∏•‡πÄ‡∏ß‡∏•1: ${essayLevel1} ‡∏Ç‡πâ‡∏≠, ‡πÄ‡∏•‡πÄ‡∏ß‡∏•2: ${essayLevel2} ‡∏Ç‡πâ‡∏≠, ‡πÄ‡∏•‡πÄ‡∏ß‡∏•3: ${essayLevel3} ‡∏Ç‡πâ‡∏≠ )`;
        
    } catch (error) {
        console.error("Error fetching total questions:", error);
    }
}

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
updateTotalQuestionsInfo();

document.addEventListener("click", async (event) => {
    if (event.target.classList.contains("edit-btn")) {
        const quizId = event.target.dataset.id;

        try {
            const response = await fetch(`/quiz/${quizId}`);
            const quiz = await response.json();

            document.getElementById("edit-type").value = quiz.type;
            document.getElementById("edit-question").value = quiz.question;
            document.getElementById("edit-options").value = quiz.options ? quiz.options.join(", ") : "";
            document.getElementById("edit-correct").value = quiz.correct;
            document.getElementById("edit-timer").value = quiz.timer;
            document.getElementById("edit-level").value = quiz.level;

            document.getElementById("popup-editquestion").style.display = "block";
            document.getElementById("blur-background").style.display = "block"; 
            document.getElementById("save-edit-btn").dataset.id = quizId;
        } catch (error) {
            console.error("Error fetching question:", error);
        }
    }
});

document.getElementById("close-edit-popup").addEventListener("click", () => {
    document.getElementById("popup-editquestion").style.display = "none";
    document.getElementById("blur-background").style.display = "none";
});

document.getElementById("save-edit-btn").addEventListener("click", async () => {
    const quizId = document.getElementById("save-edit-btn").dataset.id;
    const updatedData = {
        type: document.getElementById("edit-type").value,
        question: document.getElementById("edit-question").value,
        options: document.getElementById("edit-options").value.split(",").map(opt => opt.trim()),
        correct: document.getElementById("edit-correct").value,
        timer: parseInt(document.getElementById("edit-timer").value, 10),
        level: parseInt(document.getElementById("edit-level").value, 10),
    };

    try {
        const response = await fetch(`/update-quiz/${quizId}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(updatedData),
        });

        if (response.ok) {
            alert("Question updated successfully!");
            document.getElementById("popup-editquestion").style.display = "none";
            document.getElementById("blur-background").style.display = "none"
            fetchQuestions();
        } else {
            alert("Failed to update question.");
        }
    } catch (error) {
        console.error("Error updating question:", error);
    }
});

//‡∏•‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
    let selectedQuizIds = [];

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
    document.addEventListener("click", (event) => {
        if (event.target.classList.contains("select-btn")) {
            const quizId = event.target.closest("tr").dataset.quizId;

            if (selectedQuizIds.includes(quizId)) {
                selectedQuizIds = selectedQuizIds.filter(id => id !== quizId);
                event.target.classList.remove("selected");
            } else {
                selectedQuizIds.push(quizId);
                event.target.classList.add("selected");
            }
        }
    });

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    document.getElementById("delete-selected-btn").addEventListener("click", async () => {
        if (selectedQuizIds.length === 0) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö");
            return;
        }

        if (confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å?")) {
            try {
                const response = await fetch("/delete-multiple-quiz", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ quizIds: selectedQuizIds })
                });

                if (response.ok) {
                    alert("‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
                    selectedQuizIds = [];
                    fetchQuestions();
                } else {
                    alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°");
                }
            } catch (error) {
                console.error("Error deleting questions:", error);
            }
        }
    });

// ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏õ‡∏∏‡πà‡∏°
    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏î‡∏µ‡πÄ‡∏•‡∏¢‡πå
    function playSound(sound) {
        sound.pause();        // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
        sound.currentTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        sound.play();         // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    }

    document.querySelectorAll("#top-menu a").forEach(item => {
    item.addEventListener("mouseenter", () => {
        const hoverSound = document.getElementById("hoverSound");
        if (hoverSound) {
            hoverSound.pause();  // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
            hoverSound.currentTime = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            hoverSound.play().catch(err => console.warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á hover:", err));
        }
    });
});
    
    const oSound = document.getElementById("o-sound");
    const hSound = document.getElementById("h-sound");

    document.getElementById("random-select-btn").addEventListener("click", () => playSound(oSound));
    document.getElementById("reset-btn").addEventListener("click", () => playSound(oSound));
    document.getElementById("save-roomcode-btn").addEventListener("click", () => playSound(oSound));
    document.getElementById("save-edit-btn").addEventListener("click", () => playSound(oSound));

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
function playOSound() {
    if (oSound) {
        oSound.pause();
        oSound.currentTime = 0;
        oSound.play().catch(err => console.warn("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á hSound:", err));
    }
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏° Event Listener ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° "‡∏•‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°" ‡πÅ‡∏•‡∏∞ "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°"
document.addEventListener("click", (event) => {
    if (event.target.classList.contains("delete-btn") || event.target.classList.contains("select-btn")) {
        playOSound();
    }
});

//‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏á
document.addEventListener("DOMContentLoaded", function() {
        const soundSetting = localStorage.getItem('soundSetting');

        if (soundSetting === 'off') {
            document.querySelectorAll('audio').forEach(audio => {
                audio.muted = true;
            });
        }
    });

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡πÉ‡∏´‡∏°‡πà
function createMeteor() {
    const meteor = document.createElement('div');
    meteor.classList.add('meteor');
    document.body.appendChild(meteor);
    
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏ß
    meteor.style.left = `${Math.random() * 100}vw`;
    meteor.style.animationDuration = `${Math.random() * 5 + 5}s`;  // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏ä‡πâ‡∏≤‡πÜ

    // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏≤‡∏ß‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô
    meteor.style.width = `${Math.random() * 3 + 4}px`;
    meteor.style.height = `${Math.random() * 3 + 4}px`;
    meteor.style.opacity = Math.random() * 0.5 + 0.5;

    // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à
    setTimeout(() => {
        meteor.remove();
    }, (Math.random() * 5 + 5) * 1000);  // ‡∏•‡∏ö‡∏î‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏≠‡∏á animation
}

// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏≤‡∏ß‡∏ï‡∏Å‡∏ó‡∏∏‡∏Å‡πÜ 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
setInterval(createMeteor, 500);
    </script>
</body>
</html>